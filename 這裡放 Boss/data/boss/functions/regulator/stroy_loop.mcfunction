execute unless entity @e[tag=regulator] run execute unless entity @e[tag =regulator] run summon warden ~ ~ ~ {NoAI:1b,Health:200f,Tags:["enemy","boss","regulator_mount"],Passengers:[{id:"minecraft:skeleton",Invulnerable:1b,CustomNameVisible:1b,NoAI:1b,Health:200,CustomName:'[{"text":"叱嘯監管者 -","color":"gray","bold":true},{"text":"麥迪根","color":"#6F00FF"}]',Tags:["enemy","boss","regulator"],HandItems:[{id:"minecraft:bow",Count:1b},{}],HandDropChances:[0.000F,0.085F],ArmorItems:[{id:"minecraft:netherite_boots",Count:1b,tag:{Trim:{material:"minecraft:lapis",pattern:"minecraft:eye"}}},{id:"minecraft:netherite_leggings",Count:1b,tag:{Trim:{material:"minecraft:lapis",pattern:"minecraft:eye"}}},{id:"minecraft:netherite_chestplate",Count:1b,tag:{Trim:{material:"minecraft:lapis",pattern:"minecraft:eye"}}},{id:"minecraft:sculk_shrieker",Count:1b,tag:{BlockEntityTag:{warning_level:4}}}],ArmorDropChances:[0.000F,0.000F,0.000F,0.000F],Attributes:[{Name:generic.max_health,Base:250},{Name:generic.movement_speed,Base:0.2}]}],CustomName:'[{"text":"叱嘯監管者 -","color":"gray","bold":true},{"text":"麥迪根","color":"#6F00FF"}]',Attributes:[{Name:generic.max_health,Base:200}],Brain:{memories:{"minecraft:dig_cooldown":{value:{},ttl:1200L}}}}
    
execute if score Story Regulator matches 0 as @a at @s run tp @s ~ ~ ~ facing entity @e[tag = regulator, limit=1]
execute if score Story Regulator matches 0 as @e[tag=regulator] run tellraw @a [{"italic": false,"bold": true,"color": "red","text": "["},{"italic": false,"bold": false,"selector":"@s","hoverEvent": {"action": "show_text","contents": [{"text":"亞巴頓"}]}},{"italic": false,"bold": true,"color": "red","text": "]"},{"italic": false,"bold": true,"color": "white","text": ""},{"italic": false,"bold": false,"color": "white","translate": "ToDH.plot.regulator.battle_msg.born.1","with":[{"selector":"@s"}]}]
execute if score Story Regulator matches 1 as @e[tag=regulator] run tellraw @a [{"italic": false,"bold": true,"color": "red","text": "["},{"italic": false,"bold": false,"selector":"@s","hoverEvent": {"action": "show_text","contents": [{"text":"亞巴頓"}]}},{"italic": false,"bold": true,"color": "red","text": "]"},{"italic": false,"bold": true,"color": "white","text": ""},{"italic": false,"bold": false,"color": "white","translate": "ToDH.plot.regulator.battle_msg.born.2","with":[{"selector":"@s"}]}]
execute if score Story Regulator matches 2 as @e[tag=regulator] run tellraw @a [{"italic": false,"bold": true,"color": "red","text": "["},{"italic": false,"bold": false,"selector":"@s","hoverEvent": {"action": "show_text","contents": [{"text":"亞巴頓"}]}},{"italic": false,"bold": true,"color": "red","text": "]"},{"italic": false,"bold": true,"color": "white","text": ""},{"italic": false,"bold": false,"color": "white","translate": "ToDH.plot.regulator.battle_msg.born.3","with":[{"selector":"@s"}]}]


effect give @a slowness 3 10


execute if score Story Regulator matches 0..2 run scoreboard players add Story Regulator 1
execute if score Story Regulator matches 0..2 run schedule function boss:regulator/story_loop 2.5s
execute if score Story Regulator matches 3 run schedule function boss:regulator/spawn 2.5s
